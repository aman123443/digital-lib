# ======================================================
# ==         PRODUCTION PROFILE (for Render)          ==
# ======================================================
spring.config.activate.on-profile=prod
# ADD THIS NEW LINE FOR A FASTER STARTUP
spring.main.lazy-initialization=true

# Render provides a single DATABASE_URL. Spring Boot can parse it automatically.
# This is simpler and less error-prone than building the URL from parts.
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=require
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Secrets and environment-specific keys should be read from environment variables
gemini.api.key=${GEMINI_API_KEY}
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:3600000} # Use env var, with a default value

# On Render, the PORT environment variable is set automatically.
server.port=${PORT}

# In production, you might not want to show SQL queries for performance/security reasons
spring.jpa.show-sql=false
# 'validate' is a safer option than 'update' for production environments
spring.jpa.hibernate.ddl-auto=update